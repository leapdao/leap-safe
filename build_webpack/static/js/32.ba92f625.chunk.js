(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{1675:function(e,t,n){"use strict";var r=n(0),a=n(1674);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}t.a=function(e){var t=o({},e);return r.createElement(a.a,t)}},1680:function(e,t,n){"use strict";var r=n(0),a=n(1674);function o(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=function(e){return{padding:"0 ".concat(e,"%"),flexDirection:"column",flex:"1 0 auto"}};t.a=function(e){var t=e.children,n=e.decorators,i=e.formMutators,u=e.initialValues,s=e.onSubmit,l=e.padding,f=void 0===l?0:l,d=e.subscription,p=e.testId,m=void 0===p?"":p,b=e.validation;return r.createElement(a.b,{decorators:n,initialValues:u,mutators:i,onSubmit:s,render:function(e){var n=e.handleSubmit,a=o(e,["handleSubmit"]);return r.createElement("form",{"data-testid":m,onSubmit:n,style:c(f)},t(a.submitting,a.validating,a,a.form.mutators))},subscription:d,validate:b})}},1681:function(e,t,n){"use strict";n.d(t,"b",(function(){return m})),n.d(t,"a",(function(){return b}));var r=n(260),a=n(109),o=n(72),c=n(258),i=n(1690),u=n(39),s=n(138),l=n(12);function f(e,t,n,r,a,o,c){try{var i=e[o](c),u=i.value}catch(s){return void n(s)}i.done?t(u):Promise.resolve(u).then(r,a)}function d(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){f(o,r,a,c,i,"next",e)}function i(e){f(o,r,a,c,i,"throw",e)}c(void 0)}))}}var p=function(e){return e.match(/.{2}/g).reduce((function(e,t){return t===s.a?e+0:"00"===t?e+4:e+16}),0)},m=function(){var e=d(regeneratorRuntime.mark((function e(t,n,a,c,f){var d,p,m,b,v,h,g,y,O,x;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d=Object(l.k)(),e.next=4,Object(l.d)(d);case 4:return p=e.sent,m=new d.eth.Contract(r.abi,t),e.next=8,m.methods.nonce().call();case 8:return b=e.sent,e.next=11,m.methods.getThreshold().call();case 11:if(v=e.sent,!(c&&c.confirmations.size===v||!!f||"1"===v)){e.next=20;break}return g=c&&c.confirmations?Object(i.a)(c.confirmations,f):"0x000000000000000000000000".concat(p.replace("0x",""),"000000000000000000000000000000000000000000000000000000000000000001"),e.next=17,m.methods.execTransaction(n,c?c.value:0,a,o.a,0,0,0,u.a,u.a,g).encodeABI();case 17:h=e.sent,e.next=26;break;case 20:return e.next=22,m.methods.getTransactionHash(n,c?c.value:0,a,o.a,0,0,0,u.a,u.a,b).call({from:p});case 22:return y=e.sent,e.next=25,m.methods.approveHash(y).encodeABI();case 25:h=e.sent;case 26:return e.next=28,Object(s.b)(h,p,t);case 28:return O=e.sent,e.next=31,Object(s.c)();case 31:return x=e.sent,e.abrupt("return",O*parseInt(x,10));case 35:return e.prev=35,e.t0=e.catch(0),console.error("Error while estimating transaction execution gas costs:"),console.error(e.t0),e.abrupt("return",1e4);case 40:case"end":return e.stop()}}),e,null,[[0,35]])})));return function(t,n,r,a,o){return e.apply(this,arguments)}}(),b=function(){var e=d(regeneratorRuntime.mark((function e(t,n,r,o,i,u){var s,f,d,m,b,v,h,g,y,O,x;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,s=t){e.next=6;break}return e.next=5,Object(c.h)(n);case 5:s=e.sent;case 6:return e.next=8,Object(l.k)();case 8:return f=e.sent,d=s.contract.methods.requiredTxGas(o,i,r,u).encodeABI(),e.next=12,f.eth.call({to:n,from:n,data:d});case 12:return m=e.sent,b=new a.BigNumber(m.substring(138),16).toNumber()+1e4,v=p(d)+21e3,h=[1e4,2e4,4e4,8e4,16e4,32e4,64e4,128e4,256e4,512e4],g=new f.BatchRequest,y=h.map((function(e){return new Promise((function(n){var r=f.eth.call.request({to:t.address,from:t.address,data:d,gasPrice:0,gasLimit:b+v+e},(function(t,r){var a=r&&"string"===typeof r.data,o=!t&&("string"===typeof r&&"0x"!==r||a&&"0x"!==r.data.slice(9));n({success:o,estimation:b+e})}));g.add(r)}))})),g.execute(),e.next=21,Promise.all(y);case 21:if(O=e.sent,!(x=O.find((function(e){return e.success})))){e.next=25;break}return e.abrupt("return",x.estimation);case 25:return e.abrupt("return",0);case 28:return e.prev=28,e.t0=e.catch(0),console.error("Error calculating tx gas estimation",e.t0),e.abrupt("return",0);case 32:case"end":return e.stop()}}),e,null,[[0,28]])})));return function(t,n,r,a,o,c){return e.apply(this,arguments)}}()},1683:function(e,t,n){"use strict";var r=n(67),a=n(511),o=n.n(a),c=n(153),i=n(22),u=n(258),s=n(31),l=n(72),f=n(1681),d=n(510),p=n(504),m=n(39),b=n(138),v=n(83),h=n(64),g=n(1704),y=n(1691),O=n(1692);function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){j(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(e,t,n,r,a,o,c){try{var i=e[o](c),u=i.value}catch(s){return void n(s)}i.done?t(u):Promise.resolve(u).then(r,a)}function k(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){E(o,r,a,c,i,"next",e)}function i(e){E(o,r,a,c,i,"throw",e)}c(void 0)}))}}t.a=function(e){var t=e.safeAddress,n=e.to,a=e.valueInWei,x=e.txData,j=void 0===x?b.a:x,E=e.notifiedTransaction,S=e.enqueueSnackbar,A=e.closeSnackbar,P=e.txNonce,T=e.operation,R=void 0===T?l.a:T,I=e.navigateToTransactionsTab,D=void 0===I||I,C=e.origin,L=void 0===C?null:C;return function(){var e=k(regeneratorRuntime.mark((function e(b,x){var T,I,C,N,B,_,U,z,F,M,G,W,q,Y,K,H,V,J,X,$,Q,Z;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return T=x(),D&&b(Object(r.d)("".concat(h.c,"/").concat(t,"/transactions"))),e.next=4,Object(c.c)();case 4:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return I=Object(v.e)(T),C=I.account,N=I.hardwareWallet,B=I.smartContractWallet,e.next=10,Object(u.h)(t);case 10:return _=e.sent,e.next=13,Object(y.a)(t);case 13:return U=e.sent,e.next=16,Object(y.b)(P,U,_);case 16:return z=e.sent,e.next=19,Object(y.c)(_,z,U);case 19:return F=e.sent,e.next=22,Object(p.c)(_);case 22:return M=e.sent,e.next=25,Object(f.a)(_,t,j,n,a,R);case 25:if(G=e.sent,W="0x000000000000000000000000".concat(C.replace("0x",""),"000000000000000000000000000000000000000000000000000000000000000001"),q=Object(s.c)(E,L),Y=Object(s.d)(q.beforeExecution,S,A),J={safeInstance:_,to:n,valueInWei:a,data:j,operation:R,nonce:z,safeTxGas:G,baseGas:0,gasPrice:0,gasToken:m.a,refundReceiver:m.a,sender:C,sigs:W},e.prev=30,!(!F&&!B&&o()(M,d.a))){e.next=43;break}return e.next=35,Object(d.b)(w({},J,{safeAddress:t}),N);case 35:if(!(X=e.sent)){e.next=43;break}return A(Y),e.next=40,Object(l.f)(w({},J,{signature:X,origin:L}));case 40:return Object(s.d)(q.afterExecution.moreConfirmationsNeeded,S,A),b(Object(g.a)(t)),e.abrupt("return");case 43:if(!F){e.next=49;break}return e.next=46,Object(l.e)(J);case 46:e.t0=e.sent,e.next=52;break;case 49:return e.next=51,Object(l.d)(J);case 51:e.t0=e.sent;case 52:return V=e.t0,$={from:C,value:0},J.to===Object(i.a)()&&($.gas="2000000"),e.next=58,V.send($).once("transactionHash",function(){var e=k(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return H=n,A(Y),K=Object(s.d)(q.pendingExecution,S,A),e.prev=3,e.next=6,Object(l.f)(w({},J,{txHash:H,origin:L}));case 6:b(Object(g.a)(t)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t){return e.apply(this,arguments)}}()).on("error",(function(e){console.error("Tx error: ",e)})).then((function(e){return A(K),Object(s.d)(F?q.afterExecution.noMoreConfirmationsNeeded:q.afterExecution.moreConfirmationsNeeded,S,A),b(Object(g.a)(t)),e.transactionHash}));case 58:e.next=71;break;case 60:return e.prev=60,e.t1=e.catch(30),console.error(e.t1),A(Y),A(K),Object(s.d)(q.afterExecutionError,S,A),Q=_.contract.methods.execTransaction(n,a,j,R,0,0,0,m.a,m.a,W).encodeABI(),e.next=69,Object(O.a)(_.address,0,Q,C);case 69:Z=e.sent,console.error("Error creating the TX: ".concat(Z));case 71:return e.abrupt("return",H);case 72:case"end":return e.stop()}}),e,null,[[30,60]])})));return function(t,n){return e.apply(this,arguments)}}()}},1690:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n(6);var r=function(e,t){var n=e.reduce((function(e,t){return e[t.owner.toLowerCase()]=t,e}),{});t&&(n[t.toLowerCase()]={owner:t});var r="0x";return Object.keys(n).sort().forEach((function(e){var t=n[e];t.signature?r+=t.signature.slice(2):r+="000000000000000000000000".concat(e.replace("0x",""),"000000000000000000000000000000000000000000000000000000000000000001")})),r}},1691:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return l}));var r=n(84),a=n.n(r),o=n(508);function c(e,t,n,r,a,o,c){try{var i=e[o](c),u=i.value}catch(s){return void n(s)}i.done?t(u):Promise.resolve(u).then(r,a)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){c(o,r,a,i,u,"next",e)}function u(e){c(o,r,a,i,u,"throw",e)}i(void 0)}))}}var u=function(){var e=i(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=Object(o.a)(t),e.next=4,a.a.get(n,{params:{limit:1}});case 4:return r=e.sent,e.abrupt("return",r.data.results[0]||null);case 8:return e.prev=8,e.t0=e.catch(0),console.error("failed to retrieve last Tx from server",e.t0),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=i(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Number.isInteger(Number.parseInt(t,10))){e.next=9;break}if(null!==n){e.next=7;break}return e.next=4,r.nonce();case 4:e.t0=e.sent.toString(),e.next=8;break;case 7:e.t0="".concat(n.nonce+1);case 8:return e.abrupt("return",e.t0);case 9:return e.abrupt("return",t);case 10:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),l=function(){var e=i(regeneratorRuntime.mark((function e(t,n,r){var a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getThreshold();case 2:if(1!==e.sent.toNumber()){e.next=7;break}return a=0===Number.parseInt(n),o=r&&r.isExecuted,e.abrupt("return",a||o);case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()},1692:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return i}));var r=n(1708),a=n.n(r),o=n(12);function c(e,t,n,r,a,o,c){try{var i=e[o](c),u=i.value}catch(s){return void n(s)}i.done?t(u):Promise.resolve(u).then(r,a)}var i=function(){var t,n=(t=regeneratorRuntime.mark((function t(n,r,c,i){var u,s,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=Object(o.k)(),t.next=3,u.eth.call({to:n,from:i,value:r,data:c});case 3:return s=t.sent,l=e.from(s.slice(2),"hex"),t.abrupt("return",a.a.rawDecode(["string"],l.slice(4))[0]);case 6:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(e){c(o,r,a,i,u,"next",e)}function u(e){c(o,r,a,i,u,"throw",e)}i(void 0)}))});return function(e,t,r,a){return n.apply(this,arguments)}}()}).call(this,n(11).Buffer)},2361:function(e,t,n){"use strict";n.r(t);var r=n(525),a=n(212),o=n(0),c=n.n(o),i=n(47),u=n(41),s=n(18),l=n(1674),f=n(288),d=n(1675);function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function m(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var b=function(e){var t,n=e.debounce,r=void 0===n?1e3:n,a=e.validate,o=m(e,["debounce","validate"]);return c.a.createElement(l.a,p({},o,{validate:function(e,n,o){return o.active?new Promise((function(c){t&&t();var i=setTimeout((function(){c(a(e,n,o))}),r);t=function(){t(i),c()}})):a(e,n,o)}}))},v=n(1680),h=n(315),g=n(50),y=n(737),O=n.n(y);function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){j(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(e,t,n,r,a,o,c){try{var i=e[o](c),u=i.value}catch(s){return void n(s)}i.done?t(u):Promise.resolve(u).then(r,a)}function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(u){a=!0,o=u}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function A(){var e=I(["\n  margin: 0;\n"]);return A=function(){return e},e}function P(){var e=I(["\n  margin: 36px 0 24px 0;\n\n  img {\n    margin-right: 10px;\n  }\n"]);return P=function(){return e},e}function T(){var e=I(["\n  && {\n    width: 335px;\n  }\n"]);return T=function(){return e},e}function R(){var e=I(["\n  margin-bottom: 19px;\n"]);return R=function(){return e},e}function I(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var D=Object(s.default)(r.Text)(R()),C=Object(s.default)(r.TextField)(T()),L=s.default.div(P()),N=Object(s.default)(r.Checkbox)(A()),B={iconUrl:O.a,name:"",error:!1},_=function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["https:","http:"];try{var n=new URL(e);return t.includes(n.protocol)}catch(r){return!1}}(e)?void 0:"Please, provide a valid url"},U=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,n,r){if(r.modified)return t.reduce((function(t,n){return t||n(e)}),void 0)}},z=function(e){var t=e.appList,n=e.onAppAdded,a=e.onAppToggle,i=k(Object(o.useState)(!1),2),u=i[0],s=i[1],p=k(Object(o.useState)(B),2),m=p[0],y=p[1],x=k(Object(o.useState)(!0),2),j=x[0],S=x[1],A=function(){s(!1),n(m)},P=function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.b)(t);case 2:if(!(n=e.sent).error){e.next=6;break}return y(B),e.abrupt("return","This is not a valid Safe app.");case 6:y(w({},n));case 7:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){E(o,r,a,c,i,"next",e)}function i(e){E(o,r,a,c,i,"throw",e)}c(void 0)}))});return function(e){return t.apply(this,arguments)}}(),T=function(e){return t.find((function(t){try{var n=new URL(t.url),r=new URL(e);return n.href===r.href}catch(a){return"There was a problem trying to validate the URL existence."}}))?"This app is already registered.":void 0},R=function(e){var t=e.pristine,n=e.valid,r=e.validating;t||S(r||!n||m.error)},I=function(e){if(!e||!e.length)return y(B),"Required"};return c.a.createElement(c.a.Fragment,null,c.a.createElement(r.ButtonLink,{color:"primary",onClick:function(){return s(!u)}},"Manage Apps"),u&&c.a.createElement(r.ManageListModal,{addButtonLabel:"Add custom app",defaultIconUrl:O.a,formBody:c.a.createElement(v.a,{initialValues:{appUrl:"",agreed:!1},onSubmit:A,testId:"add-apps-form"},(function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(D,{size:"xl"},"Add custom app"),c.a.createElement(b,{component:r.TextField,label:"App URL",name:"appUrl",placeholder:"App URL",type:"text",validate:U(I,_,T,P)}),c.a.createElement(L,null,c.a.createElement(g.a,{alt:"Token image",height:55,src:m.iconUrl}),c.a.createElement(C,{label:"App name",readOnly:!0,value:m.name})),c.a.createElement(l.c,{onChange:R,subscription:{valid:!0,pristine:!0,validating:!0}}),c.a.createElement(d.a,{component:N,label:c.a.createElement("p",null,"This app is not a Gnosis product and I agree to use this app ",c.a.createElement("br",null)," at my own risk."),name:"agreed",type:"checkbox",validate:h.l}))})),formSubmitLabel:"Save",isSubmitFormDisabled:j,itemList:t.map((function(e){return w({},e,{checked:!e.disabled})})),onClose:function(){s(!1),y(B)},onItemToggle:function(e,t){a(e,t)},onSubmitForm:function(){document.querySelectorAll("[data-testId=".concat("add-apps-form","]"))[0].dispatchEvent(new Event("submit",{cancelable:!0}))}}))},F=n(109),M=n(319),G=n(512),W=n(1693),q=n(507);function Y(){var e=V(["\n  display: flex;\n  align-items: center;\n\n  span {\n    margin-right: 4px;\n  }\n"]);return Y=function(){return e},e}function K(){var e=V(["\n  padding: 15px 0;\n\n  .section {\n    margin-bottom: 15px;\n  }\n\n  .value-section {\n    display: flex;\n    align-items: center;\n  }\n"]);return K=function(){return e},e}function H(){var e=V(["\n  margin-bottom: 15px;\n"]);return H=function(){return e},e}function V(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var J=s.default.div(H()),X=s.default.div(K()),$=s.default.div(Y()),Q=function(e,t,n,a,o,i,u,s,l){var f=i.some((function(e){return!function(e){return void 0===Object(h.g)(e.to)&&void 0!==e.value&&"number"===typeof e.value&&e.data&&"string"===typeof e.data}(e)}));u({title:c.a.createElement(M.h,{iconUrl:o,title:a}),body:f?c.a.createElement(c.a.Fragment,null,c.a.createElement($,null,c.a.createElement(r.Icon,{color:"error",size:"md",type:"info"}),c.a.createElement(r.Title,{size:"xs"},"Transaction error")),c.a.createElement(r.Text,{size:"lg"},"This Safe App initiated a transaction which cannot be processed. Please get in touch with the developer of this Safe App for more information.")):c.a.createElement(c.a.Fragment,null,c.a.createElement(M.a,{ethBalance:n,safeAddress:e,safeName:t}),c.a.createElement(M.c,{withArrow:!0}),i.map((function(e,t){return c.a.createElement(J,{key:t},c.a.createElement(M.b,{description:c.a.createElement(M.a,{safeAddress:e.to}),title:"Transaction ".concat(t+1)},c.a.createElement(X,null,c.a.createElement("div",{className:"section"},c.a.createElement(W.a,{tag:"h3"},"Value"),c.a.createElement("div",{className:"value-section"},c.a.createElement(g.a,{alt:"Ether",height:40,src:Object(q.c)("0").logoUri}),c.a.createElement(G.a,null,(n=e.value,r=18,Object(F.BigNumber)(n).times("1e-".concat(r)).toFixed())," ETH"))),c.a.createElement("div",{className:"section"},c.a.createElement(W.a,{tag:"h3"},"Data (hex encoded)*"),c.a.createElement(M.j,null,e.data)))));var n,r}))),footer:c.a.createElement(r.ModalFooterConfirmation,{cancelText:"Cancel",handleCancel:s,handleOk:l,okDisabled:f,okText:"Submit"}),onClose:s})},Z=n(527),ee=n(12),te=n(1683),ne=[{type:"function",name:"multiSend",constant:!1,payable:!1,stateMutability:"nonpayable",inputs:[{type:"bytes",name:"transactions"}],outputs:[]}],re=function(e,t,n,r,a,o){var c=Object(ee.k)(),i=new c.eth.Contract(ne,"0xB522a9f781924eD250A11C54105E51840B138AdD"),u=n.map((function(e){return[c.eth.abi.encodeParameter("uint8",0).slice(-2),c.eth.abi.encodeParameter("address",e.to).slice(-40),c.eth.abi.encodeParameter("uint256",e.value).slice(-64),c.eth.abi.encodeParameter("uint256",c.utils.hexToBytes(e.data).length).slice(-64),e.data.replace(/^0x/,"")].join("")})).join(""),s=i.methods.multiSend("0x".concat(u)).encodeABI();return e(Object(te.a)({safeAddress:t,to:"0xB522a9f781924eD250A11C54105E51840B138AdD",valueInWei:0,txData:s,notifiedTransaction:"STANDARD_TX",enqueueSnackbar:r,closeSnackbar:a,operation:Z.b,origin:o}))},ae=n(83),oe=n(64),ce=n(503),ie=n(32),ue=n(38);function se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?se(Object(n),!0).forEach((function(t){fe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function fe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function de(e){return function(e){if(Array.isArray(e))return he(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||ve(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pe(e,t,n,r,a,o,c){try{var i=e[o](c),u=i.value}catch(s){return void n(s)}i.done?t(u):Promise.resolve(u).then(r,a)}function me(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){pe(o,r,a,c,i,"next",e)}function i(e){pe(o,r,a,c,i,"throw",e)}c(void 0)}))}}function be(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(u){a=!0,o=u}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}(e,t)||ve(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ve(e,t){if(e){if("string"===typeof e)return he(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?he(e,t):void 0}}function he(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ge(){var e=Oe(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n"]);return ge=function(){return e},e}function ye(){var e=Oe(["\n  padding: 24px;\n  box-sizing: border-box;\n  width: 100%;\n  height: 100%;\n"]);return ye=function(){return e},e}function Oe(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var xe=s.default.iframe(ye()),we=s.default.div(ge()),je="SEND_TRANSACTIONS",Ee="ON_SAFE_INFO";t.default=Object(a.withSnackbar)((function(e){var t=e.closeModal,n=e.closeSnackbar,a=e.enqueueSnackbar,s=e.openModal,l=be(Object(o.useState)([]),2),d=l[0],p=l[1],m=be(Object(o.useState)(!1),2),b=m[0],v=m[1],h=be(Object(o.useState)(),2),g=h[0],y=h[1],O=be(Object(o.useState)(!0),2),x=O[0],w=O[1],j=be(Object(o.useState)(!0),2),E=j[0],k=j[1],S=be(Object(o.useState)(null),2),A=S[0],P=S[1],T=Object(u.g)(),R=Object(i.f)(ce.c),I=Object(i.f)(ie.r),D=Object(i.f)(ie.v),C=Object(i.f)(ae.c),L=Object(i.f)(ie.o),N=Object(i.e)(),B=function(){return d.find((function(e){return e.id===g}))},_=function(){var e=me(regeneratorRuntime.mark((function e(r){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r&&r.messageId){e.next=3;break}return console.error("ThirdPartyApp: A message was received without message id."),e.abrupt("return");case 3:e.t0=r.messageId,e.next=e.t0===je?6:9;break;case 6:return o=function(){var e=me(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(),e.next=3,re(N,D,r.data,a,n,B().id);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q(D,I,L,B().name,B().iconUrl,r.data,s,t,o),e.abrupt("break",11);case 9:return console.error("ThirdPartyApp: A message was received with an unknown message id ".concat(r.messageId,".")),e.abrupt("break",11);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=Object(o.useCallback)((function(e){null!==e&&P(e)}),[]),F=function(e){var t=B();t&&t.id===e||(k(!0),y(e))},G=function(){return T.push("".concat(oe.c,"/").concat(D,"/balances"))},W=function(){v(!0),Object(ue.c)("APPS_LEGAL_DISCLAIMER_STORAGE_KEY",!0)},q=function(e){var t=e.find((function(e){return!e.disabled}));t&&F(t.id)},Y=function(){var e=me(regeneratorRuntime.mark((function e(t,n){var r,a,o,c,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=de(d),a=r.find((function(e){return e.id===t}))){e.next=4;break}return e.abrupt("return");case 4:return a.disabled=!n,p(r),e.next=8,Object(ue.a)("APPS_STORAGE_KEY");case 8:if(e.t0=e.sent,e.t0){e.next=11;break}e.t0=[];case 11:o=e.t0,(c=o.find((function(e){return e.url===a.url})))?c.disabled=!n:((c={url:a.url}).disabled=!n,o.push(c)),Object(ue.c)("APPS_STORAGE_KEY",o),(!(i=B())||i&&i.id===t)&&(y(void 0),q(r));case 17:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),K=function(){return d.filter((function(e){return!e.disabled}))};return Object(o.useEffect)((function(){var e=function(){var e=me(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.data,(r=t.origin)!==window.origin){e.next=3;break}return e.abrupt("return");case 3:if(B().url.includes(r)){e.next=7;break}return console.error("ThirdPartyApp: A message was received from an unknown origin ".concat(r)),e.abrupt("return");case 7:_(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return window.addEventListener("message",e),function(){window.removeEventListener("message",e)}}),[g]),Object(o.useEffect)((function(){(function(){var e=me(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ue.a)("APPS_LEGAL_DISCLAIMER_STORAGE_KEY");case 2:e.sent&&v(!0);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(o.useEffect)((function(){var e=function(){var e=me(regeneratorRuntime.mark((function e(){var t,n,r,a,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ue.a)("APPS_STORAGE_KEY");case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=[];case 5:t=e.t0,n=de(t),f.c.forEach((function(e){n.some((function(t){return t.url===e.url}))||n.push(e)})),r=[],a=0;case 10:if(!(a<n.length)){e.next=28;break}return e.prev=11,o=n[a],e.next=15,Object(f.b)(o.url);case 15:if(!(c=e.sent).error){e.next=18;break}throw Error("There was a problem trying to load app ".concat(o.url));case 18:c.disabled=void 0!==o.disabled&&o.disabled,r.push(c),e.next=25;break;case 22:e.prev=22,e.t1=e.catch(11),console.error(e.t1);case 25:a++,e.next=10;break;case 28:p(r),w(!1),q(r);case 31:case"end":return e.stop()}}),e,null,[[11,22]])})));return function(){return e.apply(this,arguments)}}();d.length||e()}),[]),Object(o.useEffect)((function(){var e=function(){k(!1),function(e,t){var n=B();A.contentWindow.postMessage({messageId:e,data:t},n.url)}(Ee,{safeAddress:D,network:C,ethBalance:L})},t=B();if(A&&g&&function(e,t){try{var n=new URL(e),r=new URL(t);return n.href===r.href}catch(a){return!1}}(A.src,t.url))return A.addEventListener("load",e),function(){A.removeEventListener("load",e)}}),[A,g]),x||x||!d.length?c.a.createElement(M.g,null):c.a.createElement(c.a.Fragment,null,c.a.createElement(r.Menu,null,c.a.createElement(z,{appList:d,onAppAdded:function(e){var t=[{url:e.url,disabled:!1}].concat(de(d.map((function(e){return{url:e.url,disabled:e.disabled}}))));Object(ue.c)("APPS_STORAGE_KEY",t),p([].concat(de(d),[le({},e,{disabled:!1})]))},onAppToggle:Y})),K().length?c.a.createElement(M.f.Wrapper,null,c.a.createElement(M.f.Menu,null,c.a.createElement(M.f.List,{activeItem:g,items:K(),onItemClick:F})),c.a.createElement(M.f.Content,null,function(){if(!g)return null;if(!b)return c.a.createElement(r.FixedDialog,{body:c.a.createElement(c.a.Fragment,null,c.a.createElement(r.Text,{size:"md"},"You are now accessing third-party apps, which we do not own, control, maintain or audit. We are not liable for any loss you may suffer in connection with interacting with the apps, which is at your own risk. You must read our Terms, which contain more detailed provisions binding on you relating to the apps."),c.a.createElement("br",null),c.a.createElement(r.Text,{size:"md"},"I have read and understood the"," ",c.a.createElement("a",{href:"https://gnosis-safe.io/terms",rel:"noopener noreferrer",target:"_blank"},"Terms")," ","and this Disclaimer, and agree to be bound by them.")),onCancel:G,onConfirm:W,title:"Disclaimer"});if("UNKNOWN"===C||!R)return c.a.createElement(we,{style:{height:"476px"}},c.a.createElement(r.FixedIcon,{type:"notOwner"}),c.a.createElement(r.Title,{size:"xs"},"To use apps, you must be an owner of this Safe"));var e=B();return c.a.createElement(c.a.Fragment,null,E&&c.a.createElement(M.g,null),c.a.createElement(xe,{frameBorder:"0",id:"iframe-".concat(e.name),ref:U,shouldDisplay:!E,src:e.url,title:e.name}))}())):c.a.createElement(r.Card,{style:{marginBottom:"24px"}},c.a.createElement(we,null,c.a.createElement(r.Title,{size:"xs"},"No Apps Enabled"))),c.a.createElement(we,null,c.a.createElement(r.IconText,{color:"secondary",iconSize:"sm",iconType:"info",text:"These are third-party apps, which means they are not owned, controlled, maintained or audited by Gnosis. Interacting with the apps is at your own risk.",textSize:"sm"})))}))}}]);